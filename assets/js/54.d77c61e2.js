(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{422:function(t,s,a){"use strict";a.r(s);var e=a(11),r=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"前言"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),s("p",[t._v("在写这篇文章之前我对hooks的概念也是很混乱，可以说平时有可能会用到，但我根本不知道他是不是hook，有什么好处，该怎么理解这个东西，所以我就花了不少时间通过各种渠道进行了学习总结")]),t._v(" "),s("h2",{attrs:{id:"hooks的定义"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hooks的定义"}},[t._v("#")]),t._v(" hooks的定义")]),t._v(" "),s("p",[t._v("想理解hooks什么的话，就来看hooks是什么。")]),t._v(" "),s("p",[t._v("说到hooks我们的固有印象是联想到react，但他其实不是react独有的，而是整个前端界的一种专业术语，但要说到底是谁最先提出这个概念我认为是react。")]),t._v(" "),s("p",[t._v("那么hooks到底是什么？有没有直接一点说明的语句，有的，它们是这么定义的。")]),t._v(" "),s("blockquote",[s("p",[t._v("系统运行到某一时期时，会调用被注册到该时机的回调函数")])]),t._v(" "),s("p",[t._v("什么意思呢？其实指的就是在某一时候会用的函数。")]),t._v(" "),s("p",[t._v("再通俗一点的话，就拿我们浏览器的onload和addeventListener来举例，这两个方法所绑定的回调函数就是我们所说的hook")]),t._v(" "),s("p",[t._v("再hook16.x之前hooks更多的被说是生命周期，而在这之后的hooks会根据不同的场景有不同的意思。")]),t._v(" "),s("blockquote",[s("p",[t._v("打个比方，在react中它是指use开头的函数方法，用来规避calss式写法，提供函数式编程所需要的生命周期/状态管理/逻辑服用等等所有class式写法会有的开发能力。")])]),t._v(" "),s("h6",{attrs:{id:"总结-react中提供给函数式组件的开发工作能力的那些函数式hooks"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结-react中提供给函数式组件的开发工作能力的那些函数式hooks"}},[t._v("#")]),t._v(" 总结：react中提供给函数式组件的开发工作能力的那些函数式hooks")]),t._v(" "),s("p",[s("strong",[t._v("那么在vue里面呢？")])]),t._v(" "),s("blockquote",[s("p",[t._v("hooks的概念是在vue3中才有的，它是在组合式api中以use开头的那一系列提供组件复用，状态管理 等等开发能力的方法。但是呢，通过其他资料的查阅，除了use开头的，组合式api中生命周期/ref等等其实也可以说是属于hooks，但这种说法不一定准确，因为不符合hooks规范。概括一下就是组合式api就是vue的hooks。")])]),t._v(" "),s("h3",{attrs:{id:"两者的共性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#两者的共性"}},[t._v("#")]),t._v(" 两者的共性：")]),t._v(" "),s("p",[t._v("react中，提供给函数式组件，并且只能给函数式组件用的方法们是hooks")]),t._v(" "),s("p",[t._v("vue中，提供给setup使用，并且只能在setup中使用的方法是hooks")]),t._v(" "),s("h2",{attrs:{id:"hooks的命名规范"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hooks的命名规范"}},[t._v("#")]),t._v(" hooks的命名规范")]),t._v(" "),s("p",[t._v("因为react是最早（好像）提出hooks这个概念的，所以他们在定义的时候提出一个假设思想。")]),t._v(" "),s("p",[t._v("**一个假设：**假设然后以use开头后跟一个大写字母开头的函数是hook")]),t._v(" "),s("p",[t._v("为了支持react的这一假设，他们还提供了一个eslint插件来强制hook规范。")]),t._v(" "),s("p",[t._v("因为在react有这么一个总结性的假设，所以我在上面的组合式api中提到的生命周期/ref这种才说不符合规范。")]),t._v(" "),s("p",[t._v("这明明规范虽然不是强制的但却是一种很好的约定，否则大家都胡乱取名的话我们也不会去区分。")]),t._v(" "),s("h2",{attrs:{id:"hooks的使用规则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hooks的使用规则"}},[t._v("#")]),t._v(" hooks的使用规则")]),t._v(" "),s("p",[t._v("react对hooks的使用有来个限制：")]),t._v(" "),s("ol",[s("li",[t._v("只在最顶层使用hook（不要循环，调教或嵌套函数中使用hook）")]),t._v(" "),s("li",[t._v("只在react函数中调用hook")])]),t._v(" "),s("p",[t._v("同样的，在eslint也有相应的插件。")]),t._v(" "),s("h2",{attrs:{id:"命名规范和使用规则总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#命名规范和使用规则总结"}},[t._v("#")]),t._v(" 命名规范和使用规则总结")]),t._v(" "),s("p",[t._v("通过上面两点，我们暂且就以react的明明规范也算是vue的hook命名规范，而使用规则在vue中也同样可以沿用，只在setup函数中调用hook")]),t._v(" "),s("h2",{attrs:{id:"hooks有什么好处"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hooks有什么好处"}},[t._v("#")]),t._v(" Hooks有什么好处？")]),t._v(" "),s("h3",{attrs:{id:"复用性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#复用性"}},[t._v("#")]),t._v(" 复用性")]),t._v(" "),s("p",[t._v("用过react或vue的应该都了解"),s("strong",[t._v("mixin")]),t._v("这个东西吧，它是是我们实现状态逻辑复用的方法。")]),t._v(" "),s("p",[t._v("既然用过mixins的话，那么自然应该清除它的缺点：")]),t._v(" "),s("ol",[s("li",[t._v("在混入多个文件或者采用嵌套混入的时候，我们难以确定方法和属性属于哪个文件，也就是难以追溯")]),t._v(" "),s("li",[t._v("在混入多个文件的时候，如果混入文件中有相同的属性火方法会出现同名现象，后混入的文件会覆盖先混入文件的同名")]),t._v(" "),s("li",[t._v("假如我们重复使用mixins的内容我们要怎么办，难道要重新引入两次mixins？很显然是没办法那么做的，为此我们要做的处理是相当麻烦的，要去动态生成mixin，无论可读性还是复杂都很麻烦")])]),t._v(" "),s("p",[t._v("基于以上明显的缺点，hook能几乎完美解决这一问题。")]),t._v(" "),s("p",[t._v("为什么解决了？我们来看一下它的使用：")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useName "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"xx"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n通过这样的方式，我们能清晰的看见这些属性是由谁产生的\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("Name1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("setName")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("setName1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n因为是函数返回值，所以我们可以直接通过给变量别名，就能够重复使用了"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("同时解决了覆盖存在的问题\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("p",[t._v("总而言之，hooks让我们的状态逻辑复用变得更加简单有效了。")]),t._v(" "),s("h3",{attrs:{id:"代码高内聚-低耦合-代码组合"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#代码高内聚-低耦合-代码组合"}},[t._v("#")]),t._v(" 代码高内聚/低耦合（代码组合）")]),t._v(" "),s("p",[t._v("react我写的不多不是清除，但在vue2中我们的代码都是分在不同的地方进行编写，data/methods/computed和各个生命周期，但在vue3中提倡我们将这些写在一起，实现这一目标的也是依靠hooks")]),t._v(" "),s("p",[t._v("我们将分散的代码集中写在了setup中，利用hooks提供的方法就能做到这一点，显而易见提高了代码的内聚且大大降低了各生命周期的耦合。")]),t._v(" "),s("h3",{attrs:{id:"this的绑定问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#this的绑定问题"}},[t._v("#")]),t._v(" this的绑定问题")]),t._v(" "),s("p",[t._v("在react中的class写法最为明显，我们经常需要去执行bind(this)，这使得我们代码变得难看复杂，万一忘记bind一下就会报错。")]),t._v(" "),s("p",[t._v("至于vue的话，虽然不明显，但它存在着这样的问题，如果我们用肩头函数去写computed/mtdhos那些的话this会变成undfined")]),t._v(" "),s("h3",{attrs:{id:"渐进式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#渐进式"}},[t._v("#")]),t._v(" 渐进式")]),t._v(" "),s("p",[t._v("这点算不上是hooks独有的优点，因为只是react和vue支持着hooks写法同时也支持着旧写法，像react还支持class类写法，vue还支持vue2的写法")]),t._v(" "),s("h2",{attrs:{id:"怼人-面试官-用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#怼人-面试官-用"}},[t._v("#")]),t._v(" 怼人(面试官)用")]),t._v(" "),s("p",[t._v("你可以用上述的方式进行回答，然后如果要总结的话可以这么说：")]),t._v(" "),s("p",[t._v("hooks是定义在某个运行时刻会被触发的回调函数，并且根据不同场景会有不同的含义，通常以use+大写开头的函数名组合为hook名，在vue和react有各自的使用限制，提高了状态的复用性，实现代码高内聚")]),t._v(" "),s("p",[t._v("本文参考：")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://juejin.cn/post/7066951709678895141",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://juejin.cn/post/7066951709678895141"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://juejin.cn/post/7119102104337121316",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://juejin.cn/post/7119102104337121316"),s("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=r.exports}}]);